@if (book$ | async; as book) {
<div class="book-detail-page">
  <div class="top-bar">
    <button (click)="goBack()" class="back-button">
      ‚Üê Kembali ke Daftar Buku
    </button>
  </div>
  <div class="detail-content">
    <div class="cover-section">
      <img
        [src]="book.coverImageUrl"
        [alt]="book.title"
        class="book-cover-large"
      />
    </div>
    <div class="info-section">
      <p class="book-categories">{{ book.categories.join(", ") }}</p>
      <h1 class="book-title">{{ book.title }}</h1>
      <p class="book-author">Oleh {{ book.author }}</p>
      <div class="book-meta">
        <span><strong>ID Buku : </strong> {{ book.id }}</span>
        <span
          ><strong>Status : </strong>
          <span class="status-available">Tersedia</span></span
        >
      </div>
      <div class="actions">
        <button class="action-button borrow" (click)="onPinjamBuku(book)">
          Ajukan Peminjaman
        </button>
        <button
          class="action-button favorite"
          (click)="handleFavoriteToggled($event, book)"
          [class.active]="book.isFavorite"
        >
          @if (book.isFavorite) {
          <img
            src="assets/icons/mdi_book-heart.svg"
            alt="Favorit"
            class="action-icon-img"
          />
          } @else {
          <img
            src="assets/icons/mdi_book-heart-outline.svg"
            alt="Tambah ke Favorit"
            class="action-icon-img"
          />
          } {{ book.isFavorite ? "Hapus dari Favorit" : "Tambah ke Favorit" }}
        </button>
      </div>
      @if (borrowingFeedback) {
      <div class="feedback-message" [ngClass]="borrowingFeedback.type">
        {{ borrowingFeedback.message }}
      </div>
      }
      <div class="description-section">
        <h2>Deskripsi</h2>
        @if (book.description) {
        <p>{{ book.description }}</p>
        } @else {
        <p><i>Deskripsi untuk buku ini tidak tersedia.</i></p>
        }
      </div>
    </div>
  </div>
</div>
} @else {
<div class="not-found-container">
  <h2>Buku tidak ditemukan</h2>
  <p>Buku yang Anda cari tidak ada atau telah dihapus.</p>
  <a routerLink="/daftar-buku" class="back-to-list-button"
    >Kembali ke Daftar Buku</a
  >
</div>
}
